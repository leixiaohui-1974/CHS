# 第二十五章：场景实战 (3) - 城市排水防涝

继供水系统之后，我们来关注城市水务的另一面：**排水防涝**。现代城市中，不透水面积的增加使得暴雨期间的径流汇集速度极快，对排水系统造成巨大压力。通过修建调蓄池和排涝泵站，是应对这一挑战的关键工程措施。

本章，我们将模拟一个简化的城市排水防涝系统，看看如何通过调度泵站的运行，来控制调蓄池的水位，从而保护城市免受内涝威胁。

## 核心概念：事件响应与应急调度

与追求长期平稳运行的供水系统不同，排水防涝系统是一个典型的 **事件响应系统**。
*   **事件驱动**: 系统的主要压力来自于外部的、突发的、不确定的事件——即暴雨。
*   **应急调度**: 系统的控制逻辑（如开启排涝泵）通常不是为了优化效益，而是为了保证安全，是一种应急响应。
*   **系统状态**: 核心的监控变量是调蓄池的水位，它直接反映了系统的安全裕度。

## 场景：调蓄池与排涝泵站联动

我们将模拟以下场景：
*   **降雨事件**: 一场历时6小时的特大暴雨。
*   **汇水区**: 雨水落在一个10平方公里的城市汇水区上，并产生径流。
*   **调蓄池**: 径流汇入一个大型的雨水调蓄池。
*   **排涝泵站**: 当调蓄池水位超过警戒水位时，泵站启动，将池水强行排入外河。
*   **目标**: 观察在暴雨期间，调蓄池和泵站的联动运行过程，以及它们如何成功地将池塘水位控制在安全范围内。

## 构建仿真脚本

### 组件解释

*   `TimeSeriesDisturbance`: 用于定义暴雨的降雨过程。
*   `LinearTank`: 用于模拟调蓄池。
*   `PumpStationModel`: 模拟排涝泵站。
*   **自定义逻辑**: 我们将在主循环中，用 `if/else` 语句实现一个简单的径流转换模型（将降雨强度转换为入池流量）和排涝泵站的启停控制逻辑。

### 完整脚本与运行

本章的完整示例代码已保存到以下文件中：

`source/ch25_urban_drainage.py`

您可以直接运行此文件来查看仿真结果：

```bash
python source/ch25_urban_drainage.py
```

### 预期结果

运行脚本后，您会看到：
*   **上图** 显示了调蓄池的水位变化。在暴雨期间（图2的蓝色条状图），水位迅速上涨。当水位触及4.5米的红色警戒线时，泵站启动，水位上涨趋势得到遏制。暴雨过后，泵站持续运行，直到水位下降到2.5米的绿色安全线以下。
*   **下图** 同时展示了降雨过程和泵站的排水流量。您能清晰地看到泵站是在降雨最强的时段启动，并在雨后持续工作，这体现了其应急排涝的功能。

这个案例展示了如何将水文输入（降雨）与水力设施（调蓄池、泵站）结合起来，对一个动态的、事件驱动的城市水务问题进行仿真分析。
