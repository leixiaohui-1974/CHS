# 第十三章：蓄水系统 (2) - 池塘与蓄水池

在上一章，我们探讨了如何使用水位-库容曲线来模拟大型、不规则的水库。然而，`chs-sdk` 中的蓄水模型同样适用于模拟城市或工业环境中的小型蓄水体，如雨水调蓄池、景观湖或工业流程中的缓冲罐。

本章，我们将以一个城市中的 **雨水调蓄池 (Stormwater Detention Pond)** 为例，展示如何应用我们已经学过的蓄水模型来解决一个常见的水文工程问题。

## 核心概念：调蓄与削峰

城市地区的地面（如停车场、屋顶）大多是不透水的。在暴雨期间，雨水会迅速汇集形成径流，如果直接排入市政管网，很可能会在短时间内造成巨大的流量洪峰，导致城市内涝。

雨水调蓄池的作用就是暂时储存这些雨水径流，然后通过一个较小的出口缓慢地将其释放到下游。这样，它就“削平”了洪峰，起到了 **调蓄削峰 (Storage and Peak Attenuation)** 的作用。

我们将使用 `FirstOrderStorageModel` (一阶惯性模型) 来模拟这个过程。这个模型有一个非常有用的特性：它的出流量与自身的蓄水量成正比 (`outflow = storage / time_constant`)。这恰好可以很好地模拟调蓄池底部有一个固定大小出口的情况：池中水位越高（蓄水量越大），出流也就越大。

## 场景：停车场雨水调蓄池模拟

我们将模拟以下场景：
*   一个停车场在经历一场历时2小时的暴雨后，产生的径流入流。
*   一个位于停车场下游的雨水调蓄池，用于收集这些径流。
*   **目标**: 观察调蓄池如何有效地将一个尖锐的入流洪峰，转化为一个平缓得多的出流过程。

## 构建仿真脚本

### 组件解释

*   `TimeSeriesDisturbance`: 我们将用它来定义一个三角形的入流过程，模拟暴雨产生的径流。
*   `FirstOrderStorageModel`: 用于模拟调蓄池。它的 `time_constant` 参数将决定其泄流的速度，可以理解为与出口的大小有关。`time_constant` 越大，代表出口越小，泄流越慢。

### 完整脚本与运行

本章的完整示例代码已保存到以下文件中：

`source/ch13/ch13_pond_simulation.py`

您可以直接运行此文件来查看仿真结果：

```bash
python water_system_sdk/docs/guide/source/ch13/ch13_pond_simulation.py
```

### 预期结果

运行脚本后，您会看到一个流量过程线图：
*   **入池流量**（蓝线）是一个尖锐的三角形，在1小时处达到5 m³/s的峰值，并在2小时后结束。
*   **出池流量**（红线）则平缓得多。它在入流开始后缓慢上升，在入流洪峰过后很久才达到其自身的峰值，并且峰值流量远低于入流洪峰（大约只有1.5 m³/s）。

这个结果清晰地展示了调蓄池的“削峰填谷”能力，证明了即便是简单的蓄水模型，也可以有效地用于分析和设计城市水文设施。
